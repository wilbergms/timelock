<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pocket Timelock Journal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <!-- Entry List Screen -->
        <div id="entry-list-screen" class="screen active">
            <div class="header">
                <h1>Pocket Timelock Journal</h1>
                <button id="settings-btn" class="header-btn">Settings</button>
            </div>
            <div id="empty-state" class="empty-state">
                <p>No entries yet. Start by creating a new memory!</p>
            </div>
            <div id="entry-list" class="entry-list"></div>
            <button id="new-entry-btn" class="main-action-btn">+ New Entry</button>
        </div>

        <!-- Entry Editor Screen -->
        <div id="entry-editor-screen" class="screen">
            <div class="editor-header">
                <button id="back-btn" type="button" class="editor-nav-btn">Back</button>
                <button id="settings-btn" type="button" class="editor-nav-btn">Settings</button>
            </div>
            <div class="editor-main">
                <input id="entry-title" type="text" placeholder="Title" autocomplete="off" />
                <textarea id="entry-content" rows="10" placeholder="Write your memory here..."></textarea>
                <div class="editor-timestamps">
                    <span id="created-time"></span>
                    <span id="edited-time"></span>
                </div>
                <div class="editor-actions">
                    <button id="seal-btn" type="button" class="editor-action-btn">Seal</button>
                    <button id="lock-btn" type="button" class="editor-action-btn">Lock</button>
                    <button id="delete-entry-btn" type="button" class="editor-action-btn">Delete</button>
                </div>
                <div id="autosave-indicator" class="autosave-indicator">
                    <span class="autosave-text">Saved</span>
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settings-screen" class="screen">
            <div class="settings-header">
                <button id="settings-back-btn" class="header-btn">Back</button>
                <h2>Settings</h2>
            </div>
            <div class="settings-main">
                <div id="pin-not-set">
                    <p>No PIN protection enabled.</p>
                    <button id="setup-pin-btn" class="settings-action-btn">Set Up PIN</button>
                </div>
                <div id="pin-set" class="hidden">
                    <p>PIN protection is <strong>enabled</strong>.</p>
                    <button id="change-pin-btn" class="settings-action-btn">Change PIN</button>
                    <button id="remove-pin-btn" class="settings-action-btn">Remove PIN</button>
                </div>
                <hr>
                <button id="export-data-btn" class="settings-action-btn">Export Data</button>
                <button id="clear-all-btn" class="settings-action-btn">Clear All Data</button>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirmation-modal" class="modal">
            <div class="modal-content">
                <h3 id="confirmation-title"></h3>
                <p id="confirmation-message"></p>
                <div class="modal-actions">
                    <button id="confirmation-cancel-btn" class="modal-btn">Cancel</button>
                    <button id="confirmation-confirm-btn" class="modal-btn">Confirm</button>
                </div>
            </div>
        </div>

        <!-- PIN Setup Modal -->
        <div id="pin-setup-modal" class="modal">
            <div class="modal-content">
                <h3 id="pin-modal-title">Set Up PIN</h3>
                <div id="pin-step-1">
                    <p>Enter a 4-digit PIN:</p>
                    <input type="password" id="pin-input-1" maxlength="4" pattern="\d{4}" autocomplete="off"/>
                </div>
                <div id="pin-step-2" class="hidden">
                    <p>Confirm your 4-digit PIN:</p>
                    <input type="password" id="pin-input-2" maxlength="4" pattern="\d{4}" autocomplete="off"/>
                </div>
                <div id="security-question-step" class="hidden">
                    <p>Set a security question for PIN recovery:</p>
                    <input type="text" id="security-question-input" placeholder="E.g. What is your favorite childhood book?" autocomplete="off"/>
                    <input type="text" id="security-answer-input" placeholder="Answer" autocomplete="off"/>
                </div>
                <div id="pin-error" class="modal-error"></div>
                <div class="modal-actions">
                    <button id="pin-cancel-btn" class="modal-btn">Cancel</button>
                    <button id="pin-continue-btn" class="modal-btn">Continue</button>
                    <button id="pin-modal-close" class="modal-btn hidden">Close</button>
                </div>
            </div>
        </div>

        <!-- PIN Verify Modal -->
        <div id="pin-verify-modal" class="modal">
            <div class="modal-content">
                <h3>PIN Verification</h3>
                <p id="pin-verify-message"></p>
                <input type="password" id="pin-verify-input" maxlength="4" pattern="\d{4}" autocomplete="off"/>
                <div id="pin-verify-error" class="modal-error"></div>
                <div class="modal-actions">
                    <button id="pin-verify-cancel-btn" class="modal-btn">Cancel</button>
                    <button id="pin-verify-submit-btn" class="modal-btn">Submit</button>
                    <button id="forgot-pin-btn" class="modal-btn">Forgot PIN?</button>
                </div>
            </div>
        </div>

        <!-- PIN Recovery Modal -->
        <div id="pin-recovery-modal" class="modal">
            <div class="modal-content">
                <h3>PIN Recovery</h3>
                <p id="security-question-display"></p>
                <input type="text" id="security-answer-verify" placeholder="Answer" autocomplete="off"/>
                <div id="recovery-error" class="modal-error"></div>
                <div class="modal-actions">
                    <button id="recovery-cancel-btn" class="modal-btn">Cancel</button>
                    <button id="recovery-submit-btn" class="modal-btn">Submit</button>
                    <button id="recovery-modal-close" class="modal-btn hidden">Close</button>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast-container"></div>
    </div>
    <script src="script.js"></script>
</body>
</html>
